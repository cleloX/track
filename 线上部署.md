








1.安装node
下载Node.js安装包。
wget https://nodejs.org/dist/v12.16.1/node-v12.16.1-linux-x64.tar.xz
解压文件。
tar xvf node-v12.16.1-linux-x64.tar.xz
###创建软链接，您就可以在任意目录下直接使用node和npm命令。
ln -s /root/node-v12.16.1-linux-x64/bin/node /usr/local/bin/node
ln -s /root/node-v12.16.1-linux-x64/bin/npm /usr/local/bin/npm

###配置环境变量
{
先去官网下载好长期支持的node.js压缩包，
node.js
然后解压缩到你自己的目录下，
将压缩包名改为node方便后续操作
mv node-v8.11.4-linux-x64.tar.gz node

然后修改profile 或者 bashrc 文件
vim ~/.profile

然后在最后面加上自己的配置
export NODE_HOME=/home/node  #你的node目录的路径
export PATH=$PATH:$NODE_HOME/bin 
export NODE_PATH=$NODE_HOME/lib/node_modules

然后重启profile或者bashrc
source ~/.profile

验证是否配置成功：
在终端中输入
npm -V

题外话：cnpm的配置
在bashrc 或者profile 内部添加一下代码

alias cnpm="npm --registry=https://registry.npm.taobao.org \
--cache=$HOME/.npm/.cache/cnpm \
--disturl=https://npm.taobao.org/dist \
--userconfig=$HOME/.cnpmrc"


然后重启profile或者bashrc
source ~/.profile
验证是否配置成功：
在终端中输入

cnpm -V

原文链接：https://blog.csdn.net/haeasringnar/article/details/81776574}
查看node、npm版本。
node -v
npm -v
至此，Node.js环境已安装完毕。软件默认安装在/root/node-v12.16.1-linux-x64/目录下。

安装cnpm
        建议使用淘宝镜像安装，否则会很慢的

$ npm install -g cnpm --registry=https://registry.npm.taobao.org  
安装完成后也要创建一个软链接

$ sudo ln -s /home/ubuntu/node-v4.5.0-linux-x86/bin/cnpm /usr/local/bin/  
这样就可以在全局使用cnpm了

更目录下使用cnpm -v 就可以查看版本了

cnpm -v
同理安装其他的全局工具也这样设置就好了
 

2.开放安全接口
记得在 安全》防火墙中添加规则（我这里开放的端口是3389，待会项目中监听的端口也是3389）



 

3.上传node项目代码
使用 xftp6  (下载链接），进入 /home 目录下，将整个项目目录上传

 

4.安装PM2

定义：PM2是node进程管理工具，可以利用它来简化很多node应用管理的繁琐任务，如性能监控、自动重启、负载均衡等，而且使用非常简单。

全局安装PM2

cnpm install -g pm2
配置软连接，方便全局使用
安装完成后,启动应用

pm2 start index.js 
 

5.修改项目文件
更新项目中的项目中的文件时，(如果你的项目代码是从git 仓库clone下来的，更新后git pull）

cd 到项目目录下 eg./home/node_python 运行

// 删除原先的进程
pm2 delete uops 
// 再开启一个新的进程 
pm2 start index.js 
 





1.安装MySQL
在Ubuntu中，默认情况下，只有最新版本的MySQL包含在APT软件包存储库中,要安装它，只需更新服务器上的包索引并安装默认包apt-get。

#命令1
sudo apt-get update
#命令2
sudo apt-get install mysql-server
1
2
3
4


2.配置MySQL
2.1 初始化配置
sudo mysql_secure_installation
1
配置项较多，如下所示：

#1
VALIDATE PASSWORD PLUGIN can be used to test passwords...
Press y|Y for Yes, any other key for No: N (我的选项)

#2
Please set the password for root here...
New password: (输入密码)
Re-enter new password: (重复输入)

#3
By default, a MySQL installation has an anonymous user,
allowing anyone to log into MySQL without having to have
a user account created for them...
Remove anonymous users? (Press y|Y for Yes, any other key for No) : N (我的选项)

#4
Normally, root should only be allowed to connect from
'localhost'. This ensures that someone cannot guess at
the root password from the network...
Disallow root login remotely? (Press y|Y for Yes, any other key for No) : Y (我的选项)

#5
By default, MySQL comes with a database named 'test' that
anyone can access...
Remove test database and access to it? (Press y|Y for Yes, any other key for No) : N (我的选项)

#6
Reloading the privilege tables will ensure that all changes
made so far will take effect immediately.
Reload privilege tables now? (Press y|Y for Yes, any other key for No) : Y (我的选项)

2.2 检查mysql服务状态
systemctl status mysql.service
1
显示如下结果说明mysql服务是正常的：


3.配置远程访问
在Ubuntu下MySQL缺省是只允许本地访问的，使用workbench连接工具是连不上的；
如果你要其他机器也能够访问的话，需要进行配置；

3.1 首先用根用户进入
sudo mysql -uroot -p
1
登入root进行其他设置：


GRANT ALL PRIVILEGES ON *.* TO root@localhost IDENTIFIED BY "123456";
1

其中root@localhos，localhost就是本地访问，配置成%就是所有主机都可连接；

第二个'123456'为你给新增权限用户设置的密码，%代表所有主机，也可以是具体的ip；
不过这随设置了%但我root通过工具还是登陆不进去，可能是为了安全性，所以新建数据库和用户；

3.2 新建数据库和用户
用root用户新建数据和用作远程访问的用户

##1 创建数据库weixx
CREATE DATABASE weixx;
##2 创建用户wxx(密码654321) 并允许wxx用户可以从任意机器上登入mysql的weixx数据库
GRANT ALL PRIVILEGES ON weixx.* TO wxx@"%" IDENTIFIED BY "654321"; 



**在使用Windows系统远程连接linux下的MySQL数据库时，提示无法连接。解决方法如下：**

第一、允许MySQL数据库被远程连接 
编辑/etc/mysql/mysql.conf.d/mysqld.cnf 配置文件，注释bind-address = 127.0.0.1这一行，然后重启MySQL服务。

vim /etc/mysql/mysql.conf.d/mysqld.cnf

注释掉以下一行，使用#号注释
# bind-address = 127.0.0.1
（腾讯与里面需要加上 bind-address = 0.0.0.0）

重启服务
service mysql restart

第二、授权允许远程连接的用户

以授权root用户为例

mysql> grant all privileges on *.* to root@"%" identified by "password" with grant option;
Query OK, 0 rows affected, 1 warning (0.00 sec)

mysql> flush privileges;
Query OK, 0 rows affected (0.00 sec)

命令解释 
*.*：第一个*代表数据库名；第二个*代表表名。这里的意思是所有数据库里的所有表都授权给用户； 
root：授予root账号； 
%：表示授权的用户IP，这里代表任意的IP地址都能访问MySQL； 
password：分配账号对应的密码； 
flush privileges：刷新权限信息。


**node报错无法连接数据库的解决方案**
提醒一句：如果直接 mysql 是 镜像市场直接下载的 记得配置：

    MYSQL_ROOT_PASSWORD：你的密码

错误：

Client does not support authentication protocol requested by server; consider upgrading MySQL client

先登录：

mysql -u root -p
#接着输入你的密码
解决：
ALTER USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '你的密码';
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '你的密码';
SELECT plugin FROM mysql.user WHERE User = 'root';



**vue项目的部署**
###项目打包
npm run build后会有一个dist目录，这个文件夹就是我们要部署上线的项目

###node服务器加上静态资源
app.use(express.static(path.resolve(__dirname, './dist')))

app.get('*', function(req, res) {
    const html = fs.readFileSync(path.resolve(__dirname, './dist/index.html'), 'utf-8')
    res.send(html)
})
app.listen(8082);
简单解释一下上面的代码，由于项目需要些数据，我的模拟数据都在data.json这个文件里，所有简单的写了三个路由,对应获取到模拟数据。然后把dist目录静态出来，读取dist目录下的index.html（因为是单页应用，只有这一个html文件）,监听8082端口


现在通过ip加端口形式能正常访问，但是如果想通过域名访问就需要配置nginx映射

nginx 端口映射配置
首先你需要把一个二级域名解析到你的主机ip,比如我使用的elm.86886.wang这个二级域名
配置文件和之前的基本一致

upstream elm {
    server 127.0.0.1:8082;
}

server {
    listen 80;
    server_name elm.86886.wang;

    location / {
        proxy_set_header Host  $http_host;
        proxy_set_header X-Real-IP  $remote_addr;  
        proxy_set_header X-Forwarded-For  $proxy_add_x_forwarded_for;
        proxy_set_header X-Nginx-proxy true;
        proxy_pass http://elm;
        proxy_redirect off;
    }
}
我把它命名为elm-8082.conf
然后通过ftp上传到/etc/nginx/conf.d/目录下
执行sudo nginx -s reload重启nginx服务器，过个十分钟就应该能正常访问了 点击访问








You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '% IDENTIFIED BY "123456"' at line 1
ERROR 1819 (HY000): Your password does not satisfy the current policy requirements

ERROR 1396 (HY000): Operation ALTER USER failed for 'root'@'%'
Do you wish to continue with the password provided